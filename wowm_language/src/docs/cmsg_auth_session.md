# CMSG_AUTH_SESSION

## Client Version 1, Client Version 2

### Description

Sent after receiving [SMSG_AUTH_CHALLENGE](./smsg_auth_challenge.md).

### Comment

This message is never encrypted.

### Wowm Representation

Autogenerated from `wowm` file at [`wow_message_parser/wowm/world/character_screen/cmsg_auth_session.wowm:1`](https://github.com/gtker/wow_messages/tree/main/wow_message_parser/wowm/world/character_screen/cmsg_auth_session.wowm#L1).
```rust,ignore
cmsg CMSG_AUTH_SESSION = 0x01ED {
    u32 build;
    u32 server_id;
    CString username;
    u32 client_seed;
    u8[20] client_proof;
    u32 decompressed_addon_info_size;
    u8[-] decompressed_addon_info;
}
```
### Header

CMSG have a header of 6 bytes.

#### CMSG Header

| Offset | Size / Endianness | Type   | Name   | Description |
| ------ | ----------------- | ------ | ------ | ----------- |
| 0x00   | 2 / Big           | uint16 | size   | Size of the rest of the message including the opcode field but not including the size field.|
| 0x02   | 4 / Little        | uint32 | opcode | Opcode that determines which fields the message contains.|

### Body

| Offset | Size / Endianness | Type | Name | Description | Comment |
| ------ | ----------------- | ---- | ---- | ----------- | ------- |
| 0x06 | 4 / Little | u32 | build |  |  |
| 0x0A | 4 / Little | u32 | server_id | This is sent to the client in [CMD_REALM_LIST_Server](./cmd_realm_list_server.md). |  |
| 0x0E | - / - | CString | username |  |  |
| - | 4 / Little | u32 | client_seed |  |  |
| - | ? / - | u8[20] | client_proof |  |  |
| - | 4 / Little | u32 | decompressed_addon_info_size |  |  |
| - | ? / - | u8[-] | decompressed_addon_info |  |  |

### Examples

#### Example 1

```c
0, 172, // size
237, 1, 0, 0, // opcode (493)
243, 22, 0, 0, // build: u32
0, 0, 0, 0, // server_id: u32
65, 0, // username: CString
136, 2, 216, 73, // client_seed: u32
136, 157, 239, 5, 37, 187, 193, 171, 167, 138, 219, 164, 251, 163, 231, 126, 103, 
172, 234, 198, // client_proof: u8[20]
86, 1, 0, 0, // decompressed_addon_info_size: u32
120, 156, 117, 204, 189, 14, 194, 48, 12, 4, 224, 242, 30, 188, 12, 97, 64, 149, 
200, 66, 195, 140, 76, 226, 34, 11, 199, 169, 140, 203, 79, 159, 30, 22, 36, 6, 115, 
235, 119, 119, 129, 105, 89, 64, 203, 105, 51, 103, 163, 38, 199, 190, 91, 213, 199, 
122, 223, 125, 18, 190, 22, 192, 140, 113, 36, 228, 18, 73, 168, 194, 228, 149, 72, 
10, 201, 197, 61, 216, 182, 122, 6, 75, 248, 52, 15, 21, 70, 115, 103, 187, 56, 204, 
122, 199, 151, 139, 189, 220, 38, 204, 254, 48, 66, 214, 230, 202, 1, 168, 184, 144, 
128, 81, 252, 183, 164, 80, 112, 184, 18, 243, 63, 38, 65, 253, 181, 55, 144, 25, 
102, 143, // decompressed_addon_info: u8[-]
```
# CMSG_AUTH_SESSION

## Client Version 3.3.5

### Description

Sent after receiving [SMSG_AUTH_CHALLENGE](./smsg_auth_challenge.md).

### Comment

This message is never encrypted.

### Wowm Representation

Autogenerated from `wowm` file at [`wow_message_parser/wowm/world/character_screen/cmsg_auth_session.wowm:70`](https://github.com/gtker/wow_messages/tree/main/wow_message_parser/wowm/world/character_screen/cmsg_auth_session.wowm#L70).
```rust,ignore
cmsg CMSG_AUTH_SESSION = 0x01ED {
    u32 client_build;
    u32 login_server_id;
    CString username;
    u32 login_server_type;
    u32 client_seed;
    u32 region_id;
    u32 battleground_id;
    u32 realm_id;
    u64 dos_response;
    u8[20] client_proof;
    u32 decompressed_addon_info_size;
    u8[-] decompressed_addon_info;
}
```
### Header

CMSG have a header of 6 bytes.

#### CMSG Header

| Offset | Size / Endianness | Type   | Name   | Description |
| ------ | ----------------- | ------ | ------ | ----------- |
| 0x00   | 2 / Big           | uint16 | size   | Size of the rest of the message including the opcode field but not including the size field.|
| 0x02   | 4 / Little        | uint32 | opcode | Opcode that determines which fields the message contains.|

### Body

| Offset | Size / Endianness | Type | Name | Description | Comment |
| ------ | ----------------- | ---- | ---- | ----------- | ------- |
| 0x06 | 4 / Little | u32 | client_build |  |  |
| 0x0A | 4 / Little | u32 | login_server_id |  |  |
| 0x0E | - / - | CString | username |  |  |
| - | 4 / Little | u32 | login_server_type |  |  |
| - | 4 / Little | u32 | client_seed |  |  |
| - | 4 / Little | u32 | region_id |  |  |
| - | 4 / Little | u32 | battleground_id |  |  |
| - | 4 / Little | u32 | realm_id |  |  |
| - | 8 / Little | u64 | dos_response |  | Purpose and exact meaning of name unknown.<br/>TrinityCore has this name but never uses the variable afterwards. |
| - | ? / - | u8[20] | client_proof |  |  |
| - | 4 / Little | u32 | decompressed_addon_info_size |  |  |
| - | ? / - | u8[-] | decompressed_addon_info |  |  |

